<?php
//include './includes/header.php';
//$obj = '{"fullname":"NAOMI THOGORI NDUMO","firstname":"NAOMI ","activeFlag":null,"birthDistrict":2906,"birthTown":null,"citizen":null,"createdBy":null,"createdDt":null,"dateBirth":"1944-07-01T00:15:00Z","dbirth":null,"dbirth2":null,"fatherBirthDistrict":null,"fatherBirthTown":null,"fatherDateBirth":null,"fatherIdentityId":null,"fatherLastName":"GITHINJI","fatherMiddleName":"GATHUNGU","fathersFirstName":"LEWIL ","fingerPrint":null,"firstName":"NAOMI ","identityId":"1075921","isAlreadyRegistered":false,"isAlreadyRegisteredMig":false,"isValidNID":true,"issueDate":"1996-05-29T00:00:00Z","issuePlace":"OTHAYA ","lastName":"NDUMO","maritalStatus":null,"middleName":"THOGORI","motherBirthDistrict":null,"motherBirthTown":null,"motherDateBirth":null,"motherIdentityId":null,"motherLastName":"GATHUNGU","motherMiddleName":"WANGECI","mothersFirstName":"CECILIA ","natRegId":null,"photo":"","physicalAddress":"457 OTHAYA","pinNoforRegNIDMig":null,"replicationDt":null,"sex":"Female","spouseBirthDistrict":null,"spouseBirthTown":null,"spouseDateBirth":null,"spouseFirstName":null,"spouseIdentityId":null,"spouseLastName":null,"spouseMiddleName":null,"updatedBy":null,"updatedDt":null,"valid":true,"surname":"NDUMO","serial_no":"201277368","other_name":"THOGORI","id_number":"1075921","gender":"F","first_name":"Naomi","family":"","dob":"","citizenship":"Kenyan","year_ob":"1944","login":"A002195426L","user":"Naomi Thogori Ndumo","kra":"A002195426L","kra_pin":"A002195426L","full_name":"Naomi Thogori Ndumo","major_group":"-Agriculture","sub_group":"-Agricultural Labourers","minor_group":"-Crop Farm Labourers","id_no":"1075921","id_issue_date":"29\/05\/1996","id_issue_place":"OTHAYA","nssf_no":"","first_name_2":"Naomi","middle_name_2":"Thogori","last_name_2":"Ndumo","dob_2":"01\/07\/1944","place_of_birth":"2906","sex_2":"Female","marital_status":"","father_id_no":"","father_first_name":"LEWIL","father_middle_name":"GATHUNGU","father_last_name":"GITHINJI","father_place_of_birth":"brthPlace","father_dob":"","mother_id_no":"","mother_first_name":"CECILIA","mother_middle_name":"WANGECI","mother_last_name":"GATHUNGU","mother_place_of_birth":"brthPlace","mother_dob":"","spouse_id_no":"","spouse_first_name":"","spouse_middle_name":"","spouse_last_name":"","spouse_dob":"","spouse_place_of_birth":"brthPlace","lr_no_1":"","building_1":"Gatugi","street_road_1":"Nyeri-Othaya Rd","city_town_1":"Othaya","county_1":"Nyeri","district_1":"Nyeri South District","area_locality_1":"Othaya","descriptive_address_1":"Othaya","postal_code_1":"10106","postal_town":"OTHAYA","po_box_1":"457","address_line_4":"","address_line_5":"","address_line_6":"","telephone_number":"","mobile_number":"0700000000","mobile_number_2":"","mobile_number_3":"","main_email_1":"NAOMITHOGORINDUMO@GMAIL.COM","secondary_email_1":"","nssf_no_1":"","alien_no":"","middle_name":"Thogori","last_name":"Ndumo","origin_country":"","work_permit":"","lr_no":"","building":"","street_road":"","city_town":"","county":"","district":"","tax_area":"","descriptive_address":"","postal_code":"","town":"","po_box":"","first_name_1":"Naomi","middle_name_1":"Thogori","last_name_1":"Ndumo","dob_1":"01\/07\/1944","sex_1":"Female","passport_no":"","passport_issue_country":"","passport_issue_date":"","passport_expiry_date":"","address_line_1":"","address_line_2":"","address_line_3":"","country":"","telephone_no":"","mobile_no_1":"","mobile_no_2":"","mobile_no_3":"","main_email":"","secondary_email":"","sms_notifications":"No","alt_lr_no":"","alt_building":"","alt_street_road":"","alt_city_town":"","alt_county":"","alt_district":"","alt_tax_area":"","alt_descriptive_address":"","alt_postal_code":"","alt_town":"","alt_po_box":"","alt_telephone_no":"","alt_mobile_no":"","alt_email":"","bank_declaration":"No","bank_name":"","bank_branch_name":"","bank_city":"","bank_acc_holder_name":"","bank_acc_no":"","tax_obligation":"Income Tax Resident","tax_reg_date":"22\/11\/1994","itax_rollout_date":"01\/01\/2016","national_transport_and_safety_authority":{"error":"User does not have a Driving Licence!"},"national_health_insurance_fund":{"last_contribution_date":"2024-12","phone":"254727811399","id_number":"1075921","first_name":"NAOMI THOGORI","last_name":"NDUMO ","email":null,"marital_status":"Single","emp_name":"SELF-EMPLOYED","birthdate":"1944-12-31","gender":"Female","facility_name":"OTHAYA SUB-DISTRICT HOSPITAL","choose_facility":true,"opc_facility":"2226854","member_number":"3625920","branch_name":"NYERI BRANCH","rating":true,"rating_message":"How do you Rate Our Services","payment_status":"ACTIVE","payment_desc":"Payment is upto date"},"nairobi_revenue_services":{"error":"user does not exist"}}';
$obj = '{"fullname":"SIMON NJUGUNA MBOGO","firstname":"SIMON ","activeFlag":null,"birthDistrict":7350,"birthTown":null,"citizen":null,"createdBy":null,"createdDt":null,"dateBirth":"1971-04-14T00:00:00Z","dbirth":null,"dbirth2":null,"fatherBirthDistrict":null,"fatherBirthTown":null,"fatherDateBirth":null,"fatherIdentityId":null,"fatherLastName":" KARANJA","fatherMiddleName":"MBOGO","fathersFirstName":"JEREMIAH ","fingerPrint":null,"firstName":"SIMON ","identityId":"10892667","isAlreadyRegistered":false,"isAlreadyRegisteredMig":false,"isValidNID":true,"issueDate":"2002-06-21T00:00:00Z","issuePlace":"KANGEMI","lastName":" MBOGO","maritalStatus":null,"middleName":"NJUGUNA","motherBirthDistrict":null,"motherBirthTown":null,"motherDateBirth":null,"motherIdentityId":null,"motherLastName":" WANJIRU","motherMiddleName":null,"mothersFirstName":"ESTHER ","natRegId":null,"photo":"","physicalAddress":"644 NAKURU","pinNoforRegNIDMig":null,"replicationDt":null,"sex":"Male","spouseBirthDistrict":null,"spouseBirthTown":null,"spouseDateBirth":null,"spouseFirstName":null,"spouseIdentityId":null,"spouseLastName":null,"spouseMiddleName":null,"updatedBy":null,"updatedDt":null,"valid":true,"surname":"MBOGO","serial_no":"216644190","other_name":"NJUGUNA","id_number":"10892667","gender":"M","first_name":"Simon","family":"","dob":"","citizenship":"Kenyan","year_ob":"1971","login":"A002642213D","user":"Simon Njuguna Mbogo","kra":"A002642213D","kra_pin":"A002642213D","full_name":"Simon Njuguna Mbogo","major_group":"-Professionals","sub_group":"-Information and Communications Technology Professionals","minor_group":"-Systems Analysts","id_no":"10892667","id_issue_date":"21\/06\/2002","id_issue_place":"WESTLANDS","nssf_no":"","first_name_2":"Simon","middle_name_2":"Njuguna","last_name_2":"Mbogo","dob_2":"14\/04\/1971","place_of_birth":"7350","sex_2":"Male","marital_status":"","father_id_no":"","father_first_name":"JEREMIAH","father_middle_name":"MBOGO","father_last_name":"KARANJA","father_place_of_birth":"brthPlace","father_dob":"","mother_id_no":"","mother_first_name":"ESTHER","mother_middle_name":"","mother_last_name":"WANJIRU","mother_place_of_birth":"brthPlace","mother_dob":"","spouse_id_no":"","spouse_first_name":"","spouse_middle_name":"","spouse_last_name":"","spouse_dob":"","spouse_place_of_birth":"brthPlace","lr_no_1":"","building_1":"CFC Stanbic Hse","street_road_1":"HAILE SELASSIE","city_town_1":"NAIROBI CITY (EAST)","county_1":"Nairobi","district_1":"Westlands District","area_locality_1":"Westlands","descriptive_address_1":"Westlands","postal_code_1":"00100","postal_town":"NAIROBI GPO","po_box_1":"24522","address_line_4":"","address_line_5":"","address_line_6":"","telephone_number":"0722714163","mobile_number":"0722714163","mobile_number_2":"","mobile_number_3":"","main_email_1":"SNMBOGO@GMAIL.COM","secondary_email_1":"","nssf_no_1":"","alien_no":"","middle_name":"Njuguna","last_name":"Mbogo","origin_country":"","work_permit":"","lr_no":"","building":"","street_road":"","city_town":"","county":"","district":"","tax_area":"","descriptive_address":"","postal_code":"","town":"","po_box":"","first_name_1":"Simon","middle_name_1":"Njuguna","last_name_1":"Mbogo","dob_1":"14\/04\/1971","sex_1":"Male","passport_no":"","passport_issue_country":"","passport_issue_date":"","passport_expiry_date":"","address_line_1":"","address_line_2":"","address_line_3":"","country":"","telephone_no":"","mobile_no_1":"","mobile_no_2":"","mobile_no_3":"","main_email":"","secondary_email":"","sms_notifications":"No","alt_lr_no":"","alt_building":"","alt_street_road":"","alt_city_town":"","alt_county":"","alt_district":"","alt_tax_area":"","alt_descriptive_address":"","alt_postal_code":"","alt_town":"","alt_po_box":"","alt_telephone_no":"","alt_mobile_no":"","alt_email":"","bank_declaration":"No","bank_name":"","bank_branch_name":"","bank_city":"","bank_acc_holder_name":"","bank_acc_no":"","tax_obligation":"Income Tax Resident","tax_reg_date":"04\/11\/1999","itax_rollout_date":"01\/01\/2015","national_transport_and_safety_authority":{"date_of_expiry":"2024-07-20","dlclass":"B","full_name":"SIMON NJUGUNA MBOGO","license_number":"HSY47","ncClasses":"","status":"valid"},"national_health_insurance_fund":{"last_contribution_date":"2024-01","phone":null,"id_number":"10892667","first_name":"NJUGUNA SIMON","last_name":"MBOGO ","email":null,"marital_status":"Married","emp_name":"THE BRITISH COUNCIL","birthdate":"1971-12-31","gender":"Male","facility_name":"","choose_facility":true,"opc_facility":null,"member_number":"0694192","branch_name":"UPPER HILL BRANCH","rating":true,"rating_message":"How do you Rate Our Services","payment_status":"ACTIVE","payment_desc":"Payment is upto date"},"nairobi_revenue_services":{"id":245229,"id_number":"10892667","alien_id_number":null,"pin_no":null,"brs_no":null,"mobile_number":"0722714163","email_id":"","mobile_number_2nd":null,"secondary_email_id":null,"tax_payer_type":"INDI","tax_payer_name":"Simon Njuguna Mbogo","passport_no":null,"customer_id":"2020_240841","psv":false,"is_alien":false}}';
$item = json_decode($obj, true);
function convertToReadableFormat($input)
{
    // Check if the input contains snake_case
    if (strpos($input, '_') !== false) {
        // Convert snake_case to readable format
        $words = explode('_', $input);
    } else {
        // Convert camelCase to readable format
        $words = preg_split('/(?=[A-Z])/', $input);
    }

    // Trim, capitalize the first letter of each word and make the rest lowercase
    $words = array_map(function ($word) {
        return ucfirst(strtolower(trim($word)));
    }, $words);

    // Join the words with spaces
    return implode(' ', $words);
}
$table1 = '
<!--begin::Card-->
<div class="card pt-4 mb-6 mb-xl-9">
    <!--begin::Card header-->
    <div class="card-header border-0">
        <!--begin::Card title-->
        <div class="card-title">
            <h2>Common Data Profile</h2>
        </div>
        <!--end::Card title-->
    </div>
    <!--end::Card header-->
    <!--begin::Card body-->
    <div class="card-body pt-0 pb-5">
        <!--begin::Table wrapper-->
        <div class="table-responsive">
            <table class="table align-middle table-striped gy-7 gs-7">
                <thead>
                    <tr class="fw-bold fs-6 text-gray-800 border-bottom border-gray-200">
                        <th></th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody class="fs-6 fw-bold text-gray-600">';
foreach ($item as $id => $row) {
    if (!is_array($row) && !is_bool($row) && $row != '' && $row != null) {
        $table1 .= '
                     <tr>
                        <td>' . convertToReadableFormat($id) . '</td>
                        <td>' . $row . '</td>
                     </tr>
                     ';
    }
}


$table1 .= '
                </tbody>
            </table>
        </div>
        <!--end::Table wrapper-->
    </div>
    <!--end::Card body-->
</div>
<!--end::Card-->
';
//echo $table1;

$table2 = '
<!--begin::Card-->
<div class="card pt-4 mb-6 mb-xl-9">
    <!--begin::Card header-->
    <div class="card-header border-0">
        <!--begin::Card title-->
        <div class="card-title">
            <h2>National Transport Authority Profile</h2>
        </div>
        <!--end::Card title-->
    </div>
    <!--end::Card header-->
    <!--begin::Card body-->
    <div class="card-body pt-0 pb-5">
        <!--begin::Table wrapper-->
        <div class="table-responsive">
            <table class="table align-middle table-striped gy-7 gs-7">
                <thead>
                    <tr class="fw-bold fs-6 text-gray-800 border-bottom border-gray-200">
                        <th></th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody class="fs-6 fw-bold text-gray-600">';
foreach ($item['national_transport_and_safety_authority'] as $id => $row) {
    if (!is_array($row)) {
        $table2 .= '
                     <tr>
                        <td>' . convertToReadableFormat($id) . '</td>
                        <td>' . $row . '</td>
                     </tr>
                     ';
    }
}


$table2 .= '
                </tbody>
            </table>
        </div>
        <!--end::Table wrapper-->
    </div>
    <!--end::Card body-->
</div>
<!--end::Card-->
';
//echo $table2;



$table3 = '
<!--begin::Card-->
<div class="card pt-4 mb-6 mb-xl-9">
    <!--begin::Card header-->
    <div class="card-header border-0">
        <!--begin::Card title-->
        <div class="card-title">
            <h2>Health Insurance Profile</h2>
        </div>
        <!--end::Card title-->
    </div>
    <!--end::Card header-->
    <!--begin::Card body-->
    <div class="card-body pt-0 pb-5">
        <!--begin::Table wrapper-->
        <div class="table-responsive">
            <table class="table align-middle table-striped gy-7 gs-7">
                <thead>
                    <tr class="fw-bold fs-6 text-gray-800 border-bottom border-gray-200">
                        <th></th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody class="fs-6 fw-bold text-gray-600">';
foreach ($item['national_health_insurance_fund'] as $id => $row) {
    if (!is_array($row) && !is_bool($row) && $row != '' && $row != null) {
        $table3 .= '
                     <tr>
                        <td>' . convertToReadableFormat($id) . '</td>
                        <td>' . $row . '</td>
                     </tr>
                     ';
    }
}


$table3 .= '
                </tbody>
            </table>
        </div>
        <!--end::Table wrapper-->
    </div>
    <!--end::Card body-->
</div>
<!--end::Card-->
';
//echo $table3;



$table4 = '
<!--begin::Card-->
<div class="card pt-4 mb-6 mb-xl-9">
    <!--begin::Card header-->
    <div class="card-header border-0">
        <!--begin::Card title-->
        <div class="card-title">
            <h2>Nairobi County Profile</h2>
        </div>
        <!--end::Card title-->
    </div>
    <!--end::Card header-->
    <!--begin::Card body-->
    <div class="card-body pt-0 pb-5">
        <!--begin::Table wrapper-->
        <div class="table-responsive">
            <table class="table align-middle table-striped gy-7 gs-7">
                <thead>
                    <tr class="fw-bold fs-6 text-gray-800 border-bottom border-gray-200">
                        <th></th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody class="fs-6 fw-bold text-gray-600">';
foreach ($item['nairobi_revenue_services'] as $id => $row) {
    if (!is_array($row) && !is_bool($row) && $row != '' && $row != null) {
        $table4 .= '
                     <tr>
                        <td>' . convertToReadableFormat($id) . '</td>
                        <td>' . $row . '</td>
                     </tr>
                     ';
    }
}


$table4 .= '
                </tbody>
            </table>
        </div>
        <!--end::Table wrapper-->
    </div>
    <!--end::Card body-->
</div>
<!--end::Card-->
';
$expoundData =  $table1 . $table2 . $table3 . $table4;;
